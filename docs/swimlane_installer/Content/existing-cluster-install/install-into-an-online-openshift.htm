<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="mc-template-page: url('../Resources/MasterPages/OtherTopics.flmsp');">
    <head><title></title>
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1 id="install-into-an-online-openshift-cluster">Install Into an Online OpenShift Cluster</h1>
        <h2 id="prepare-the-spi-kubectl-add-on">Prepare the SPI Kubectl Add-on</h2>
        <ol>
            <li>Download the SPI kubectl add-on for the OS version where you run kubectl commands from:</li>
            <p>Linux: <br /></p>
            <MadCap:codeSnippet>
                <MadCap:codeSnippetCopyButton />
                <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">https://get.swimlane.io/existing-cluster/install/linux</MadCap:codeSnippetBody>
            </MadCap:codeSnippet>
            <p>OSX: <br /></p>
            <MadCap:codeSnippet>
                <MadCap:codeSnippetCopyButton />
                <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">https://get.swimlane.io/existing-cluster/install/osx</MadCap:codeSnippetBody>
            </MadCap:codeSnippet>
        </ol>
        <ol MadCap:continue="true">
            <li>Untar the file:
                <MadCap:codeSnippet><MadCap:codeSnippetCopyButton /><MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">tar zxf kots_linux_&lt;OS version&gt;.tar.gz</MadCap:codeSnippetBody></MadCap:codeSnippet></li>
        </ol>
        <ol MadCap:continue="true">
            <li>
                <p>Rename the kots binary to kubectl-kots:<br /></p>
                <MadCap:codeSnippet>
                    <MadCap:codeSnippetCopyButton />
                    <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">mv kots kubectl-kots</MadCap:codeSnippetBody>
                </MadCap:codeSnippet>
            </li>
        </ol>
        <ol MadCap:continue="true">
            <li>
                <p>Move the kubectl-kots binary into your PATH so that it can be recognized by kubectl (e.g. /usr/local/bin/)<br /></p>
                <MadCap:codeSnippet>
                    <MadCap:codeSnippetCopyButton />
                    <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">mv kubectl-kots /usr/local/bin/</MadCap:codeSnippetBody>
                </MadCap:codeSnippet>
            </li>
        </ol>
        <h2 id="install-the-spi-using-the-kubectl-add-on">Install the SPI Using the Kubectl Add-on</h2>
        <ol>
            <li>
                <p>Choose the namespace into which you are installing the Swimlane Platform Installer and Swimlane Platform. These instructions refer to this namespace as your-namespace.</p>
            </li>
            <li>
                <p>Choose the service account that the Swimlane pods will run as. These instructions refer to this service account as service-account-name.</p>
            </li>
            <li>
                <p>Create the namespace and service account with the correct OpenShift policy to run the Swimlane pods:</p>
                <MadCap:codeSnippet>
                    <MadCap:codeSnippetCopyButton />
                    <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">kubectl create namespace your-namespace:
oc create serviceaccount service-account-name -n your-namespace
oc adm policy add-scc-to-user anyuid -z service-account-name -n your-namespace</MadCap:codeSnippetBody>
                </MadCap:codeSnippet>
            </li>
        </ol>
        <ol MadCap:continue="true">
            <li>Next, run:<br /><MadCap:codeSnippet><MadCap:codeSnippetCopyButton /><MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">kubectl kots install swimlane-platform --namespace your-namespace</MadCap:codeSnippetBody></MadCap:codeSnippet></li>
            <p>The kubectl add-on automatically creates the namespace specified if it doesn't already exist.</p>
            <p>If the KUBECONFIG environment variable is not set you will need to add --kubeconfig /path/to/kube/config to the install command above so that it can authenticate to your cluster.</p>
            <p>After a few moments of initialization, you are prompted to create the SPI Admin Console password.</p>
            <p>
                <img src="../Resources/Images/admin_console_password.png" alt="" />
            </p>
        </ol>
        <ol MadCap:continue="true">
            <li>When the install is complete it automatically proxies the SPI UI to http://localhost:8800.</li>
            <p>
                <img src="../Resources/Images/admin_console_forward.png" alt="" />
            </p>
            <p>In a Chrome browser window, access the SPI UI at http://localhost:8800 to begin configuring the Swimlane Platform.</p>
        </ol>
        <ol MadCap:continue="true">
            <li>Enter the password you specified during the install process.</li>
            <p>
                <img src="../Resources/Images/admin_console_login.png" width="50%" alt="" />
            </p>
        </ol>
        <ol MadCap:continue="true">
            <li>Next, you are prompted to upload your .yaml license file. Select or drag the file, and then click Upload license.</li>
            <p>
                <img src="../Resources/Images/upload_license.png" width="50%" alt="" />
            </p>
            <p>After the license is uploaded you are prompted to either install in an airgapped environment or download from the internet. At the bottom of the page, click Download Swimlane from the Internet.</p>
        </ol>
        <ol MadCap:continue="true">
            <li>
                <p>Next, see <a href="configure-the-swimlane-platform-for-an-existing-cluster-install.htm">Configure the Swimlane Platform for an Existing Cluster Install</a> to configure and deploy Swimlane.</p>
            </li>
            <li>
                <p>After Swimlane has been deployed, more steps are required to ensure that all Swimlane pods start successfully:</p>
                <p>The service account used by the Swimlane tools container requires an OpenShift policy be set in order to run. If you chose to have the service account used by the Swimlane Tools deployment automatically created then the service account name to specify to the command below will be swimlane-backup. If you chose to create your own service account, you will need to use the name of the service account you created for it.</p>
                <MadCap:codeSnippet>
                    <MadCap:codeSnippetCopyButton />
                    <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">oc adm policy add-scc-to-user anyuid -z tools-service-account-name -n your-namespace</MadCap:codeSnippetBody>
                </MadCap:codeSnippet>
            </li>
        </ol>
    </body>
</html>