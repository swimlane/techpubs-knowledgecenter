<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="mc-template-page: url('../Resources/MasterPages/OtherTopics.flmsp');">
    <head><title></title>
        <link href="../Resources/Stylesheets/MainStyles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1 id="analyze-a-swimlane-platform-installer-support-bundle">Analyze a Swimlane Platform Installer Support Bundle</h1>
        <p>A support bundle is a collection of logs and output from the underlying Kubernetes cluster resources. This information is invaluable for troubleshooting as it includes tons of information about node health, Swimlane pod health and logs, KOTS pod health and logs, and more.</p>
        <p>The support bundle is a gzip’d tarball (.tar.gz) that can be extracted using the tar command:</p>
        <MadCap:codeSnippet>
            <MadCap:codeSnippetCopyButton />
            <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">tar zxvf supportbundle-XXXX-XX-XXTYY_YY_YY.tar.gz</MadCap:codeSnippetBody>
        </MadCap:codeSnippet>
        <p>The support bundle is comprised of logs divided into several directories:</p>
        <ul>
            <li>
                <p><code>ceph</code>
                </p>
                <ul>
                    <li>Logs and outputs related to the status and configuration of the ceph storage system used by the KOTS related pods</li>
                </ul>
            </li>
            <li>
                <p><code>cluster-info</code>
                </p>
                <ul>
                    <li>Information about the Kubernetes version</li>
                </ul>
            </li>
            <li>
                <p><code>cluster-resources</code>
                </p>
                <ul>
                    <li>
                        <p>Definitions of all of the resources running in the clusters</p>
                    </li>
                    <li>
                        <p>Each resource type is a different subdirectory (deployments, services, statefulsets, etc.)</p>
                    </li>
                    <li>
                        <p>Each resource subdirectory has a json file for each namespace that has that resource type</p>
                    </li>
                    <li>
                        <p>Swimlane resources are in the <code>default</code> namespace</p>
                    </li>
                </ul>
            </li>
            <li>
                <p><code>kots</code>
                </p>
                <ul>
                    <li>
                        <p>Logs specific to the KOTS UI and process pods</p>
                        <ul>
                            <li>
                                <p><code>goldpinger</code>
                                </p>
                                <ul>
                                    <li>
                                        <p>Goldpinger checks the network connections between each unique pair of nodes.</p>
                                    </li>
                                    <li>
                                        <p>Results are stored as JSON in <code>default/kotsadm-###/goldpinger-statistics-stdout.txt</code></p>
                                    </li>
                                    <li>
                                        <p>When working correctly, each ping should return a 200 status code</p>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><code>swimlane</code>
                </p>
                <ul>
                    <li>
                        <p>The custom support bundle collectors we have written for our Swimlane Platform resources</p>
                    </li>
                    <li>
                        <p>Each pod type has a separate subdirectory for the logs collected for each pod of that type</p>
                    </li>
                    <li>
                        <p>What we collect:</p>
                        <ul>
                            <li>
                                <p><code>api</code>
                                </p>
                                <ul>
                                    <li>
                                        <p><code>logs</code> - API pod logs</p>
                                    </li>
                                    <li>
                                        <p><code>pip-list</code> - List of python packages installed in the API pods</p>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p><code>sw-mongo</code>
                                </p>
                                <ul>
                                    <li>
                                        <p><code>cert</code> - Expiration date of the MongoDB certificate</p>
                                    </li>
                                    <li>
                                        <p><code>df</code> - Disk usage for the partitions of the MongoDB pods</p>
                                    </li>
                                    <li>
                                        <p><code>free</code> - Memory usage of the MongoDB pods</p>
                                    </li>
                                    <li>
                                        <p><code>logs</code> - MongoDB pod logs</p>
                                    </li>
                                    <li>
                                        <p><code>mongo-version</code> - The version of MongoDB</p>
                                    </li>
                                    <li>
                                        <p><code>stats</code> - MongoDB database stats</p>
                                    </li>
                                    <li>
                                        <p><code>time-drift</code> - The current time of the MongoDB pods to use to compare against the support bundle date and time to check for time drift</p>
                                    </li>
                                    <li>
                                        <p><code>top</code> - Top running processes in the MongoDB pods</p>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p><code>tasks</code>
                                </p>
                                <ul>
                                    <li>
                                        <p><code>logs</code> - Tasks pod logs</p>
                                    </li>
                                    <li>
                                        <p><code>pip-list</code> - List of python packages installed in the Tasks pods</p>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p><code>tools</code>
                                </p>
                                <ul>
                                    <li>
                                        <p><code>environment-validator</code> - Output of the environment validator script being run from the Tools pod</p>
                                    </li>
                                    <li>
                                        <p><code>logs</code> - Tools pod logs</p>
                                    </li>
                                    <li>
                                        <p><code>ping</code> - A ping test done from the Tools pod to see if there is internet access</p>
                                        <ul>
                                            <li>Note: This only confirms if the node that the Tools pod is running on has internet access and not every node in the cluster</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <p><code>web</code>
                                        </p>
                                        <ul>
                                            <li><code>logs</code> - Web pod logs</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <p><code>velero</code>
                </p>
                <ul>
                    <li>Logs for the Velero resources that handle snapshots</li>
                </ul>
            </li>
        </ul>
    </body>
</html>