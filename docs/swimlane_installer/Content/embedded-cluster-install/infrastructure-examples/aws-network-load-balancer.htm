<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="mc-template-page: url('../../Resources/MasterPages/OtherTopics.flmsp');">
    <head><title></title>
        <link href="../../Resources/Stylesheets/MainStyles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1 id="aws-network-load-balancer">AWS Network Load Balancer</h1>
        <p>This topic explains how to use an AWS Network Load Balancer (Layer 4) for your Swimlane deployment.</p>
        <h2 id="architecture-diagram">Architecture Diagram</h2>
        <p>
            <img src="../../Resources/Images/aws-network-load-balancer-diagram.png" alt="" />
        </p>
        <h2 id="target-groups">Target Groups</h2>
        <ul>
            <li>Create the following <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-target-groups.html" target="_blank_">Target Groups:</a><ul><li>Port 443
<ul><li><code>Type</code> set to <code>IP</code></li><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>443</code></li><li><code>VPC</code> should match that of the EC2 instances that Swimlane will be installed on</li><li><code>Health Check protocol</code> set to <code>TCP</code></li><li><code>Health Check Port</code> set to <code>Traffic port</code></li><li><code>Healthy Threshold</code>, <code>Unhealthy Threshold</code>, <code>Timeout</code>, and <code>Interval</code> may vary based on your preferences for how quickly an instance should become unhealthy in order to stop receiving traffic.</li><li>Register the first instance that you'll be running the Swimlane Platform Installer on to the target group with <code>Port</code> set to <code>443</code>.
<ul><li>After Swimlane has been installed on the additional nodes they need to be added to this target group.</li></ul></li></ul></li><li>Port 8800
<ul><li><code>Type</code> set to <code>IP</code></li><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>8800</code></li><li><code>VPC</code> should match that of the EC2 instances that Swimlane will be installed on</li><li><code>Health Check protocol</code> set to <code>TCP</code></li><li><code>Health Check Port</code> set to <code>Traffic port</code></li><li><code>Healthy Threshold</code>, <code>Unhealthy Threshold</code>, <code>Timeout</code>, and <code>Interval</code> may vary based on your preferences for how quickly an instance should become unhealthy in order to stop receiving traffic.</li><li>Register the first instance that you'll be running the Swimlane Platform Installer on to the target group with <code>Port</code> set to <code>8800</code>.
<ul><li>After Swimlane has been installed on the additional nodes they need to be added to this target group.</li></ul></li></ul></li><li>Port 6443
<ul><li><code>Type</code> set to <code>IP</code></li><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>6443</code></li><li><code>VPC</code> should match that of the EC2 instances that Swimlane will be installed on</li><li><code>Health Check protocol</code> set to <code>TCP</code></li><li><code>Health Check Port</code> set to <code>Traffic port</code></li><li><code>Healthy Threshold</code>, <code>Unhealthy Threshold</code>, <code>Timeout</code>, and <code>Interval</code> may vary based on your preferences for how quickly an instance should become unhealthy in order to stop receiving traffic.</li><li>Register the first instance that you'll be running the Swimlane Platform Installer on to the target group with <code>Port</code> set to <code>6443</code>.
<ul><li>After Swimlane has been installed on the additional nodes they need to be added to this target group.</li></ul></li></ul></li><li>Optional - Port 80
<ul><li>Used for the HTTP to HTTPS redirect and can be excluded if you only want HTTPS/443 to be available</li><li><code>Type</code> set to <code>IP</code></li><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>80</code></li><li><code>VPC</code> should match that of the EC2 instances that Swimlane will be installed on</li><li><code>Health Check protocol</code> set to <code>TCP</code></li><li><code>Health Check Port</code> set to <code>Traffic port</code></li><li><code>Healthy Threshold</code>, <code>Unhealthy Threshold</code>, <code>Timeout</code>, and <code>Interval</code> may vary based on your preferences for how quickly an instance should become unhealthy in order to stop receiving traffic.</li><li>Register the first instance that you'll be running the Swimlane Platform Installer on to the target group with <code>Port</code> set to <code>80</code>.
<ul><li>After Swimlane has been installed on the additional nodes they need to be added to this target group.</li></ul></li></ul></li></ul></li>
        </ul>
        <h2 id="load-balancer">Load Balancer</h2>
        <ul>
            <li>Create an <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/network/create-network-load-balancer.html" target="_blank_">AWS Network Load Balancer</a><ul><li><code>IP address type</code><ul><li>Choose <code>ipv4</code></li></ul></li><li>Add a <code>Listener </code>for each of the following ports:
<ul><li>Port 443
<ul><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>443</code></li><li>Configure it to forward traffic to the <code>Port 443</code> Target Group created above</li></ul></li><li>Port 8800
<ul><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>8800</code></li><li>Configure it to forward traffic to the <code>Port 8800</code> Target Group created above</li></ul></li><li>Port 6443
<ul><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>6443</code></li><li>Configure it to forward traffic to the <code>Port 6443</code> Target Group created above</li></ul></li><li>Optional - Port 80
<ul><li>Used for the HTTP to HTTPS redirect and can be excluded if you only want HTTPS/443 to be available</li><li><code>Protocol</code> set to <code>TCP</code></li><li><code>Port</code> set to <code>80</code></li><li>Configure it to forward traffic to the <code>Port 80</code> Target Group created above</li></ul></li></ul></li><li><code>Availability Zones</code><ul><li>The Network Load Balancer's <code>VPC</code> should match that of the EC2 instances that Swimlane will be installed on</li><li>The Network Load Balancer's <code>Availability Zones</code> should include each Availability Zone used by the EC2 instances that Swimlane will be installed on</li></ul></li></ul></li>
        </ul>
        <h2 id="security-groups">Security Groups</h2>
        <p>For AWS Network Load Balancers, ingress port access is defined in the Security Group used by the EC2 instances. The port requirements are available in the  External Access section of the <a href="../system-requirements-for-an-embedded-cluster-install/system-requirements-for-an-embedded-cluster-install.htm">System Requirements for an Embedded Cluster Installation</a>.</p>
        <h2 id="swimlane-configuration">Swimlane Configuration</h2>
        <p>Be sure to enable the <code>Enable the Ingress Controller</code> option on the Swimlane Platform Installer UI config tab.</p>
    </body>
</html>