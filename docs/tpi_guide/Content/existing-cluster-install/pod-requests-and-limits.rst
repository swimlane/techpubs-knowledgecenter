Pod Requests and Limits
=======================

The following are the recommended requests and limits for each pod type
for the deployment sizes defined in `Cluster
Resources <system-requirements-for-an-existing-cluster-install/system-requirements-for-an-existing-cluster-install.htm#Cluster>`__.
Requests and limits can be raised based on your cluster's scheduling
needs and resource utilization. See `Managing Resources for
Containers <https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/>`__
in the Kubernetes documentation for more information.

**Note:** The MongoDB init containers stop running after their
initialization is complete and the primary MongoDB container starts.
Their resources are only used during pod start up.

Single node (Dev/Test) / Small
------------------------------

+-------------+-------------+-------------+-------------+-------------+
| Pod Type    | CPU         | CPU Limits  | Memory      | Memory      |
|             | Requests    |             | Requests    | Limits      |
+=============+=============+=============+=============+=============+
| MongoDB     | 1000m (1    | 2000m (2    | 16G         | 16G         |
|             | CPU core)   | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| MongoDB     | 1000m (1    | 2000m (2    | 16G         | 16G         |
| Init        | CPU core)   | CPU cores)  |             |             |
| Containers  |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tasks       | 4000m (4    | 4000m (4    | 2G          | 2G          |
|             | CPU cores)  | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| API         | 500m (.5    | 1000m (1    | 2G          | 4G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Web         | 200m (.2    | 400m (.4    | 500M        | 500M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Reports     | 200m (.2    | 400m (.4    | 250M        | 250M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Records     | 100m (.1    | 100m (.1    | 250M        | 250M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tenant      | 200m (.2    | 400m (.4    | 500M        | 500M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tools       | 100m (.1    | 200m (.2    | 1G          | 1G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| PostgreSQL  | 250m (.25   | 300m (.3    | 500M        | 500M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Gotenberg   | 50m (.05    | 100m (.1    | 100M        | 100M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine API | 500m (.5    | 1000m (1    | 1G          | 1G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Agent       | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Engine      | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Webhook     | CPU core)   | CPU core)   |             |             |
| Agent       |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Websocket   | CPU core)   | CPU core)   |             |             |
| Relay       |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| RabbitMQ    | 500m (.5    | 1000m (1    | 3G          | 3G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+

Medium
------

+-------------+-------------+-------------+-------------+-------------+
| Pod Type    | CPU         | CPU Limits  | Memory      | Memory      |
|             | Requests    |             | Requests    | Limits      |
+=============+=============+=============+=============+=============+
| MongoDB     | 4000m (4    | 8000m (8    | 32G         | 32G         |
|             | CPU cores)  | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tasks       | 4000m (4    | 4000m (4    | 6G          | 6G          |
|             | CPU cores)  | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| API         | 1000m (1    | 2000m (2    | 6G          | 6G          |
|             | CPU core)   | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Web         | 400m (.4    | 800m (.8    | 1G          | 1G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Reports     | 300m (.3    | 800m (.8    | 500M        | 500M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Records     | 200m (.2    | 200m (.2    | 500M        | 500M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tenant      | 200m (.2    | 400m (.4    | 2G          | 2G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tools       | 200m (.2    | 400m (.4    | 2G          | 2G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| PostgreSQL  | 500m (.5    | 800m (.8    | 800M        | 800M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Gotenberg   | 100m (.1    | 200m (.2    | 200M        | 200M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine API | 500m (.5    | 1000m (1    | 2G          | 2G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Agent       | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Engine      | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Webhook     | CPU core)   | CPU core)   |             |             |
| Agent       |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 1G          | 1G          |
| Websocket   | CPU core)   | CPU core)   |             |             |
| Relay       |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| RabbitMQ    | 500m (.5    | 1000m (1    | 6G          | 6G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+

Large
-----

+-------------+-------------+-------------+-------------+-------------+
| Pod Type    | CPU         | CPU Limits  | Memory      | Memory      |
|             | Requests    |             | Requests    | Limits      |
+=============+=============+=============+=============+=============+
| MongoDB     | 6000m (6    | 13000m (13  | 86G         | 86G         |
|             | CPU cores)  | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tasks       | 4000m (4    | 4000m (4    | 8G          | 8G          |
|             | CPU cores)  | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| API         | 1000m (1    | 2000m (2    | 4G          | 4G          |
|             | CPU core)   | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Web         | 500m (.5    | 1000m (1    | 2G          | 2G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Reports     | 600m (.6    | 1200m (1.2  | 1G          | 1G          |
|             | CPU core)   | CPU cores)  |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Records     | 200m (.2    | 400m (.4    | 1G          | 1G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tenant      | 500m (.5    | 1000m (1    | 2G          | 2G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Tools       | 400m (.4    | 800m (.8    | 2G          | 4G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| PostgreSQL  | 500m (.5    | 800m (.8    | 800M        | 800M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Gotenberg   | 100m (.1    | 200m (.2    | 200M        | 200M        |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine API | 500m (.5    | 1000m (1    | 2G          | 2G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 2G          | 1G          |
| Agent       | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 2G          | 2G          |
| Engine      | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 2G          | 2G          |
| Webhook     | CPU core)   | CPU core)   |             |             |
| Agent       |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| Turbine     | 500m (.5    | 1000m (1    | 2G          | 2G          |
| Websocket   | CPU core)   | CPU core)   |             |             |
| Relay       |             |             |             |             |
+-------------+-------------+-------------+-------------+-------------+
| RabbitMQ    | 500m (.5    | 1000m (1    | 8G          | 8G          |
|             | CPU core)   | CPU core)   |             |             |
+-------------+-------------+-------------+-------------+-------------+
